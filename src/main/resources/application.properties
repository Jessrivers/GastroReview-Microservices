spring.application.name=GastroReview
server.port=8083

# ========================================
# DATABASE CONFIGURATION
# ========================================

# --- NEON PostgreSQL (Cloud) - COMENTADO (No funciona por restricciones de red/puerto) ---
# Obtén tus credenciales en: https://console.neon.tech
#spring.datasource.url=jdbc:postgresql://ep-sparkling-silence-adgn5if6-pooler.c-2.us-east-1.aws.neon.tech:5432/neondb?sslmode=require
#spring.datasource.username=neondb_owner
#spring.datasource.password=npg_6sYdIVk1SEft
#spring.datasource.driver-class-name=org.postgresql.Driver

# --- Local PostgreSQL - ACTIVO ---
# Base de datos local en puerto 8080
spring.datasource.url=jdbc:postgresql://localhost:8080/Gastro_review
spring.datasource.username=postgres
spring.datasource.password=2311508855
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Configuration (Optimizado para Neon con hibernación)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.initialization-fail-timeout=-1

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.open-in-view=false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# GraphQL Configuration
spring.graphql.graphiql.enabled=true
spring.graphql.graphiql.path=/graphiql
spring.graphql.schema.introspection.enabled=true
spring.graphql.cors.allowed-origins=*
spring.graphql.cors.allowed-methods=GET,POST

# Swagger/OpenAPI Configuration
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.packages-to-scan=WebSiters.GastroReview.controller
springdoc.show-actuator=false

# Session Configuration - Sesión se invalida al cerrar navegador
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax
# No especificar max-age hace que la cookie sea de sesión (se borra al cerrar navegador)

# JWT Configuration
jwt.secret=GastroReviewUpdatedSecretKeyForJWTTokenSigningMustBe256BitsOrMore2024
jwt.expiration=86400000

# Eureka Client Configuration
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.client.register-with-eureka=false
eureka.client.fetch-registry=false
eureka.client.enabled=false
eureka.instance.prefer-ip-address=true
eureka.instance.hostname=localhost
# Configuración para que no falle si Eureka no está disponible
eureka.client.registry-fetch-interval-seconds=30
eureka.client.initial-instance-info-replication-interval-seconds=40
